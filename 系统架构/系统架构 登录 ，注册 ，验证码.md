## 系统架构 登录 ，注册 ，验证码

```
登录界面提供了页面前用户和密码输入为空的前端验证。点击登录按钮进入后端，先在后端判断用户名、密码、是否为空的情况，如果有任何一个为空，返回json数据动态显示错误。成功会生产UserToken和UserId，存放到cookie中，下次用户登录时就可以通过携带cookie中的UserToken和UserId 在登录拦截器进行通过UserToken来查询数据库中的用户的UserId与先有的UserId是否相同来判断用户是否已经登录。为了网站的安全，防止暴力破解，在用户登录错误后，我们增加LoginErrorTimes的值存放到cookie中去，当用户再次登录的时候，登录错误的情况下，我们判断LoginErrorTimes的次数是否大于1，大于1，我们就会在返回的json数据中，修改IsNeedVerifyCode 的值为true，在页面进行处理的时候，通过调用ajax,后端生产vefifycode和图片，并保持vefifycode和新的guid到数据库中，guid存放到cookie中,让页面加载vefifycode和图片，当用户点击登录。先判断所有为空的情况，再根据输入vefifycode和cookie中的guid来查找数据库中是否有这个验证码，通过则继续验证用户名和密码。如果不通过，则返回错误的json数据，重新在页面用ajax调用后台，产生新的vefifycode、图片
和guid,重新进行验证码的验证。
```

